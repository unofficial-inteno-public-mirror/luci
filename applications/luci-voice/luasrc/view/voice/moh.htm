<%#
LuCI - Lua Configuration Interface
Copyright 2008 Steven Barth <steven@midlink.org>
Copyright 2008 Jo-Philipp Wich <xm@leipzig.freifunk.net>

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

	http://www.apache.org/licenses/LICENSE-2.0
-%>

<%+header%>

<h2><a id="content" name="content"><%:Music On Hold%></a></h2>

<fieldset class="cbi-section" id="cbi-table-table">
	<legend><%:Sounds%></legend>
	<div class="cbi-section-descr">Uploaded sound files.</div>
	<div class="cbi-section-node">
		<table class="cbi-section-table">
			<tr class="cbi-section-table-titles"><th class="cbi-section-table-cell">File</th><th class="cbi-section-table-cell">Remove</th></tr>
			<tr class="cbi-section-table-descr"><th class="cbi-section-table-cell"></th><th class="cbi-section-table-cell"></th></tr>

			<% for k, v in pairs(sound_files) do %>
			<tr class="cbi-section-table-row cbi-rowstyle-1">
				<td class="cbi-value-field">
					<div><%=v%></div>
				</td>

				<td class="cbi-value-field">
					<div>
						<form method="post" action="<%=REQUEST_URI%>">
							<input type="hidden" name="file" value="<%=v%>" />
							<input class="cbi-button cbi-input-button" type="submit" name="remove"  value="Remove" />
						</form>
					</div>
				</td>
			</tr>
			<% end %>
		</table>
	</div>
</fieldset>

<fieldset class="cbi-section">

	<fieldset class="cbi-section">
		<legend><%:Upload%></legend>
		<form method="post" action="<%=REQUEST_URI%>" enctype="multipart/form-data">
			<div class="cbi-section-descr"><%:Upload a sound file to be played when a call is put on hold or placed in a queue. The sound file must be in GSM format with a sample rate of 8 kHz. Use sox source.wav -r 8000 -c 1 music.gsm to convert. %></div>
			<div class="cbi-section-node">
				<div class="cbi-value cbi-value-last">
					<label class="cbi-value-title" for="sound"><%:Upload%>:</label>
					<div class="cbi-value-field">
						<input type="file" name="sound" id="sound" />
						<input type="submit" class="cbi-button cbi-input-apply" name="upload" value="<%:Upload%>" />
					</div>
				</div>
			</div>
		</form>
	</fieldset>

</fieldset>

<%+footer%>
